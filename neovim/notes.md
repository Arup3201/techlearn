# My Guide To Neovim

In this guide I will document almost everything that I learn from installing neovim to learning some tips and tricks to make my development faster.

## Installing neovim in Ubuntu

In the neovim github directory they have explained the steps of installing neovim in Ubuntu. 

If you are new to Ubuntu then it might be difficult for you to install neovim on your own. Even if you are already familiar with the method and know that "I just have to do a simple apt install right?"

If that is the case then stop for a moment...

If you do apt install, it is not going to install the latest version and after that you are going to face a lot of issues in the following steps.

Following is the right and simplest way of installing neovim...

1. Install curl if you don't have it already. `sudo apt install curl`
2. Download the tar of neovim using curl - `curl -LO https://github.com/neovim/neovim/releases/latest/download/nvim-linux64.tar.gz`
3. Next remove any existing neovim related stuff from `/opt/nvim` - `sudo rm -rf /opt/nvim`
4. Extract the tar file - `sudo tar -C /opt -xzf nvim-linux64.tar.gz`
5. Finally add neovim to your `.bashrc` or `.zshrc` - `export PATH="$PATH:/opt/nvim-linux64/bin"`

With this you have the latest version of the neovim installed in your ubuntu.

You can check the version of the neovim by - `nvim -v`

Make sure to use `nvim` and not neovim.

## Configuring neovim

After you have installed the latest version of neovim, you need to configure it.

To configure neovim, change the current working directory to `~/.config`. Make a directory with the name `nvim` so that it is treated as the neovim configuration directory.

The commands will be as follows:

```sh
cd ~/.config
mkdir nvim
cd nvim
```

Now you are in the neovim configuration directory, you can open neovim with the following command -
```sh
nvim .
```

This will open the neovim in the current directory (`nvim` in this case).

### First init.lua

After you open neovim, you will see an interface like this -

![Neovim interface first time](./images/first-time-interface.png)

You can up and down with the up/down keys or also with k/j keys. As I was a windows user this felt pretty weird at first to me.

But according to the doc of neovim - j lools a hool pointing down so it is used for down movement. Also h and l are for left and right movement.

There are lots of other keys that you have to learn, but let's stick to the easiest and most used ones.

To create file you have to use `%` and to create directories you can use `d`.

After creating any file you can start editing it after pressing `i` which enables INSERT mode.

After making changes to the file, you want to save it - press `esc` to escape insert mode, press `:w` to save the file.

If you want to go back to the neovim file explorer interface then press `:Ex` in normal mode.

To save any file 

Let's create `init.lua` file which is the starting point of any lua project. Before you get anxious with the fact that you don't know lua - same is true for me as well.

As a complete beginner I have just started configuring my neovim. And I just know as much to configure neovim. So, don't worry if you don't have any knowledge of it.

Let's start with a simple hello example.

```lua
print("Hello")
```

### lua package

Next create a directory with the name `lua`. Go inside the directory and create another directory with a name of your choice. I am naming it `thestartupcoder`.

Inside the directory we will create another `init.lua`.

```lua
print("Hello from thestartupcoder")
```

### importing lua package

Now you have build your own lua package. You can use it inside the `init.lua` that we built for the first time.

```lua
require("thestartupcoder")
print("Hello")
```

### getting output of the lua code

After saving this file and closing the neovim interface with `:q`. If you run `nvim .` then you will see  a nice output generated by the lua code we just wrote.

If everything goes fine till now, then congrats!

Next we will configure our neovim using lua.

## Configuring neovim using lua

To start off configuring neovim, we will start by remapping the explore command (`:Ex`) which is probably difficult for you to write.

### map new key for explorer

Create a file inside `thestartupcoder` or whatever name you have used for your package - name it `remap.lua`.

```lua
vim.g.mapleader = " "
vim.keymap.set("n", "<leader>pv", vim.cmd.Ex)
```

In the `remap.lua` we are setting the leader as ` ` and mapping the key ` pv` to trigger `:Ex` command.

Next we can save it and run the command `:so` to execute the code inside `remap.lua`. After this, you will be able to go back to the neovim explorer with ` pv`.

### install plugin manager for neovim - packer

We will install a plugin manager called `packer`. To install packer we can just run the following command -

```
git clone --depth 1 https://github.com/wbthomason/packer.nvim\
 ~/.local/share/nvim/site/pack/packer/start/packer.nvim
```

After we got our plugin manager we can start installing plugins.

To install any plugin we need another file `packer.lua` inside the package `thestartupcoder`.

```lua
-- This file can be loaded by calling `lua require('plugins')` from your init.vim

-- Only required if you have packer configured as `opt`
vim.cmd [[packadd packer.nvim]]

return require('packer').startup(function(use)
        -- Packer can manage itself
        use 'wbthomason/packer.nvim'

        end)
```

After giving a shout out by `:so`, run `:PackerSync` which will run packer and install any new installations mentioned in the `packer.lua` file.

## install plugins in neovim

Let's start installing plugins one by one - after 2 examples you will be able to understand how to do the same for other plugins.

### install telescope plugin in neovim

[telescope.nvim](https://github.com/nvim-telescope/telescope.nvim) is a highly extendable fuzzy finder over lists. Built on the latest awesome features from neovim core. Telescope is centered around modularity, allowing for easy customization.

To install the plugin you have to add the following line of lua code to `packer.lua` which I got from their github repo.

```lua
use {
  'nvim-telescope/telescope.nvim', tag = '0.1.8',
-- or                            , branch = '0.1.x',
  requires = { {'nvim-lua/plenary.nvim'} }
}
```

After adding it, you can `:so` and then `:PackerSync` to install the plugin.

After it is installed let's go back to nvim directory and add a new directory called `after`. Inside `after` you can add your plugin configurations.

For example to add configuration for telescope-nvim, I will create `telescope.lua`.

```lua
local builtin = require('telescope.builtin')
vim.keymap.set('n', '<leader>pf', builtin.find_files, { desc = 'Telescope find files' })
vim.keymap.set('n', '<C-p>', builtin.git_files, { desc = 'Telescope find git files' })
vim.keymap.set('n', '<leader>ps', function() 
        builtin.grep_string({ search = vim.fn.input('Grep > ') })
        end, { desc = 'Telescope find files' })
```

Now we can `:so` and then use ` pf` to find files in the project, also search for strings in files using ` ps` which asks you to search a string.

### install plugin for colors - rose-pine

[rose-pine](https://github.com/rose-pine/neovim) is a neovim color plugin. To install it, first let's add it to `packer.lua` using the code -

```lua
use({ 
        "rose-pine/neovim", 
        name = "rose-pine",
        config = function()
        vim.cmd("colorscheme rose-pine")
        end
        })
```

Next, we will create a `colors.lua` file inside `after` directory.

```lua
function ColorMyPencils(color)
    color = color or "rose-pine"
    vim.cmd.colorscheme(color)

    vim.api.nvim_set_hl(0, "Normal", {bg = "none"})
    vim.api.nvim_set_hl(0, "NormalFloat", {bg = "none"})
end

ColorMyPencils()
```

Then as always do `:so` and it should change the color scheme of your neovim. Also the last 2 lines are for setting the background color to your default settings.


